version: 1.0.0
title: Czech National Repository - documets

$defs:
  Authority:
    properties:
      fullName:
        # otazka: moznost duplicity - pridat pole jmeno a prijmeni pro nove zaznamy + do ui generovani fullName podle pravidel
        type: keyword
        required: true
        oarepo:sample:
          faker: name

      nameType:
        type: keyword
        enum: [ Organizational, Personal ]
        oarepo:sample: [ Organizational, Personal ]

      authorityIdentifiers[]:
        # v nuslu nejsou, v IDR jsou
        properties:
          identifier:
            type: keyword
            required: true
            oarepo:sample:
              faker: isbn13
          scheme:
            type: keyword
            required: true
            enum: [ orcid, scopusID, researcherID, czenasAutID, vedidk, institutionalID, ISNI, ROR, ICO, DOI ]
        uniqueItems[]: true

      affiliations[]:
        oarepo:use: "#/$defs/TaxonomyTerm"
        $description: taxonomie institutions
        oarepo:sample:
          faker: company
        uniqueItems[]: true

  ObjectPID:
    $description: Persistent identifier of object
    properties:
      identifier:
        type: keyword
        required: true
        oarepo:sample:
          faker: isbn13
      scheme:
        type: keyword
        required: true
        enum: [ DOI,  Handle,  ISBN,  ISSN,  RIV ]

  DateOrRange:
    type: keyword
    # TODO: jak validovat a interpretovat tento format (a jak ho pak spravne facetovat)
    format: "year | yearmonth | date | datetime | year-range | yearmonth-range | date-range | datetime-range"

  Date:
    type: keyword
    # format: [ year | yearmonth | date | datetime ]

  Location:
    properties:
      place:
        type: keyword
        required: true
      country:
        oarepo:use: "#/$defs/TaxonomyTerm"

  Longitude:
    type: number
    minimum: -180
    maximum: 180

  Latitude:
    type: number
    minimum: -90
    maximum: 90

  RelatedItem:
    description: linkdata, propojení přidružených dokumentů a datasetů.

    properties:
      itemTitle:
        description: název propojeného dokumentu
        type: fulltext
        required: true

      itemCreators[]:
        oarepo:use: "#/$defs/Authority"
        uniqueItems[]: true

      itemContributors[]:
        oarepo:use: "#/$defs/Authority"
        properties:
          role:
            oarepo:use: "#/$defs/TaxonomyTerm"
        uniqueItems[]: true

      itemPIDs[]:
        oarepo:use: "#/$defs/ObjectPID"
        uniqueItems[]: true

      itemURL:
        type: keyword
        format: URL
        oarepo:sample:
          faker: url

      itemYear:
        type: integer

      itemVolume:
        type: keyword

      itemIssue:
        type: keyword

      itemStartPage:
        type: keyword

      itemEndPage:
        type: keyword

      itemPublisher:
        type: keyword

      itemRelationType:
        description: typ vztahu k původnímu popisovanému dok.
        oarepo:use: "#/$defs/TaxonomyTerm"

      itemResourceType:
        oarepo:use: "#/$defs/TaxonomyTerm"

  FundingReference:
    $description: informace o přidruženém projektu
    $comment: >
      MIGRACE NUŠL - protože v datech NUŠL hrozný stav v polích pro poskytovatele.
      u českých projektů na základě prvních dvou znaků v řetězci s identifikátorem
      projektu lze přiřadit poskytovatele.

    properties:
      projectID:
        type: keyword
        required: true
      projectName:
        type: fulltext
      fundingProgram:
        type: fulltext
      funder:
        oarepo:use: "#/$defs/TaxonomyTerm"
        #required: true

  GeoLocation:
    properties:
      geoLocationPlace:
        description: Free description of the location; ie. Atlantic Ocean
        type: keyword
        required: true
      geoLocationPoint:
        properties:
          pointLongitude:
            oarepo:use: "#/$defs/Longitude"
            required: true
          pointLatitude:
            oarepo:use: "#/$defs/Latitude"
            required: true

  SystemIdentifier:
    $description: >
      systémové identifikátory a trvalé adresy pořízené skrze OAI, případně importy/migrace",
    $comment: >
      možná bude sekce OAI fungovat jinak,takže možná bude potřeba to upravit. Ale tohle jsou údaje,
      které by se měli ukládat přímo v záznamu; nusl = PURL
    properties:
      identifier:
        type: keyword
        required: true
      scheme:
        type: keyword
        enum: [ nusl, nuslOAI, originalRecordOAI, catalogueSysNo, nrOAI ]
        required: true

  Event:
    properties:
      eventNameOriginal:
        $description: volný zápis celého názvu akce
        type: fulltext
        required: true

      eventNameAlternate[]:
        $description: zkrácená forma názvu akce nebo překladu. měla by fungovat jako alias pro vyhledávání
        type: fulltext

      eventDate:
        description: rozsah konání akce/konference -  date or range.
        oarepo:use: "#/$defs/DateOrRange"
        required: true

      eventLocation:
        oarepo:use: "#/$defs/Location"
        required: true


  DocumentMetadata:
    properties:
      # nevyclenit mainTitle ven?
      title:
        type: fulltext    # TODO: title will be langtext
        $description: Main (original) title of the object/work.
        required: true

      additionalTitles[]:
        $description: Additional titles of the object/work such as subtitle, translatedTitle and alternativeTitle.
        uniqueItems[]: true
        properties:
          # TODO: zvazit, jestli preci jenom neprejit na pole extenzi langstringu, abychom byli datacite (a rdm)
          # primo kompatibilni
          title:
            type: multilingual
            required: true
          titleType:
            type: keyword
            required: true
            enum: [ translatedTitle, alternativeTitle, subtitle, other ]

      creators[]:
        oarepo:use: "#/$defs/Authority"
        minItems[]: 1
        uniqueItems[]: true
        required[]: true

      contributors[]:
        oarepo:use: "#/$defs/Authority"
        uniqueItems[]: true
        properties:
          role:
            oarepo:use: "#/$defs/TaxonomyTerm"

      resourceType:
        $description: Taxonomy driven typology of objects that's possible to store in the repository
        oarepo:use: "#/$defs/TaxonomyTerm"
        required: true
        oarepo:sample: ["Bakalářská práce", "Diplomová práce"]

      dateIssued:
        $description: >
          The date the resource is originaly published by publisher, in
          case of grey literature made publicly available by the institution.
        $comment: >
          týká se dokumentu, nikoliv metadat!!! Stejně jako pro data, budou se přes něj řídit přístupy - embargo
        oarepo:use: "#/$defs/Date"
        required: true
        oarepo:sample:
          faker: date

      dateAvailable:
        $description: >
          The date the resource is publicly available in a repository.
        $comment: >
          týká se dokumentu, nikoliv metadat!!!
          stejně jako pro data, budou se přes něj řídit přístupy
          - embargo
        oarepo:use: "#/$defs/Date"
        oarepo:sample:
          faker: date

      dateModified:
        $description: The date of the last update to the resource, not metadata
        $comment: >
          týká se dokumentu/obsahu, nikoliv metadat!!!
          neukazuje se ve vkládacím formuláři. jen při editaci záznamu!
        oarepo:use: "#/$defs/Date"
        oarepo:sample:
          faker: date

      subjects[]:
        $description: >
          subject by vocabularies or free-form keywords created by author(s)
        properties:
          subjectScheme:
            type: keyword
            oarepo:sample: ['keyword', 'czenas', 'psh']
          subject:
            type: multilingual
            required: true
          valueURI:
            type: keyword
            oarepo:sample:
              faker: url
          classificationCode:
            type: keyword
        uniqueItems[]: true

      publishers[]:
        $description: volný zápis vydavatele
        type: fulltext
        uniqueItems[]: true
        oarepo:sample:
          faker: company

      subjectCategories[]:
        $description: >
          FRASCATI oborové třídění - může sloužit jako podklad pro oborové filtrování
        oarepo:use: "#/$defs/TaxonomyTerm"
        uniqueItems[]: true
        oarepo:sample: ["Pravděpodobnost a statistika", "Matematika", "Chemické vědy"]

      languages[]:
        $description: ISO 639-2 B in slug, ISO 639-2 T in alias, ISO 639-1 as Alpha2.
        oarepo:use: "#/$defs/TaxonomyTerm"
        minItems[]: 1
        required: true
        uniqueItems[]: true
        oarepo:sample: ['cs', 'en', 'de', 'fr', 'it']

      notes[]:
        $description: >
          Free-form note for any comment that couldn't be inserted in any other fields.
        type: fulltext
        uniqueItems[]: true

      abstract:
        $description: Multilingual abstract description for record (may contain HTML).
        type: multilingual

      methods:
        $description: Multilingual methodology employed for the study or research.(may contain HTML)
        type: multilingual

      technicalInfo:
        $description: >
          Multilingual detailed information that may be associated with
          design, implementation, operation, use, and/or maintenance of a process
          or system.(may contain HTML)
        type: multilingual

      rights[]:
        $description: >
          Any license or copyright information for this resource. Taxonomy field.
        oarepo:use: "#/$defs/TaxonomyTerm"
        uniqueItems[]: true
        oarepo:sample: ["CC BY", "CC BY-SA", "CC BY-NC", "CC BY-ND", "CC BY-NC-SA", "CC BY-NC-ND"]

      accessRights:
        $description: >
          Taxonomy driven list of possible access to the document - open,
          embargoed, restirected and metadata only access. Based on COAR
          vocabulary - http://vocabularies.coar-repositories.org/documentation/access_rights/",
        oarepo:use: "#/$defs/TaxonomyTerm"
        oarepo:sample: [open, embargoed, restricted, "metadata only"]

      relatedItems[]:
        oarepo:use: "#/$defs/RelatedItem"
        uniqueItems[]: true

      fundingReferences[]:
        oarepo:use: "#/$defs/FundingReference"
        uniqueItems[]: true

      version:
        $comment: verze obsahu, nikoliv záznamu. hodnota ve formuláři není editovatelná.
        type: keyword
        oarepo:sample: ["1.0", "1.1", "2.0", "2.1", "2.2"]

      geoLocations[]:
        oarepo:use: "#/$defs/GeoLocation"
        uniqueItems[]: true

      accessibility:
        $comment: >
          textové vyjádření dostupnosti souborů, primárně pro harvestované zdroje.
          nastavuje se pro každý zdroj zvlášť během konverze podle dostupnosti souborů
          ve zdrojovém systému. ve vkládacím formuláři by bylo pouze pro restricted access
        type: multilingual

      series[]:
        $description: >
          edice; tématicky sdružuje podobné věci, nemusí se jednat o pravou edici,
          ale tagování/grupování podobných záznamů
        uniqueItems[]: true

        properties:
          seriesTitle:
            type: keyword
            required: true
            $comment: našeptávač již uložených hodnot
            oarepo:sample: ["series A", "series B", "series C"]
          seriesVolume:
            type: keyword
            oarepo:sample: ["1", "2", "3", "4"]

      externalLocation:
        $description: externí umístění dokumentu (mimo repozitáře), formát URL

        properties:
          externalLocationURL:
            type: keyword
            format: URL
            required: true
            oarepo:sample:
              faker: url

          externalLocationNote:
            type: fulltext

      extent:
        $description: >
          Extent of the work. If it is not paged, then it takes over number
          of pages of the entire pdf.
        type: keyword

      originalRecord:
        $description: >
          odkaz na původní záznam, zobrazovat koncovému uživateli v detailu záznamu
          jako původní místo uložení. objevuje se jen u harvestu
        type: keyword
        format: URL
        oarepo:sample:
          faker: url

      objectIdentifiers[]:
        $description: >
          Persistent identifier/s of object as ISBN, DOI, etc. + assigned by National Repository.
        oarepo:use: "#/$defs/ObjectPID"
        uniqueItems[]: true

      systemIdentifiers[]:
        oarepo:use: "#/$defs/SystemIdentifier"

      events[]:
        oarepo:use: "#/$defs/Event"

      collections[]:
        $description: mapování institucí z nušl, dočasné
        type: keyword
